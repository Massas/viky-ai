{
  "id": "package_complex_date",
  "interpretations":
  [
    {
      "id": "and",
      "expressions":
      [
        {
          "expression": "and",
          "locale": "en"
        },
        {
          "expression": "et",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_the",
      "expressions":
      [
        {
          "expression": "the",
          "locale": "en"
        },
        {
          "expression": "le",
          "locale": "fr"
        },
        {
          "expression": "la",
          "locale": "fr"
        },
        {
          "expression": "les",
          "locale": "fr"
        },
        {
          "expression": "l'",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_of",
      "expressions":
      [
        {
          "expression": "of",
          "locale": "en"
        },
        {
          "expression": "of the",
          "keep-order": true,
          "glued": true,
          "locale": "en"
        },
        {
          "expression": "de",
          "locale": "fr"
        },
        {
          "expression": "du",
          "locale": "fr"
        },
        {
          "expression": "de la",
          "keep-order": true,
          "glued": true,
          "locale": "fr"
        },
        {
          "expression": "des",
          "locale": "fr"
        },
        {
          "expression": "d'",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_in",
      "expressions":
      [
        {
          "expression": "in",
          "locale": "en"
        },
        {
          "expression": "dans",
          "locale": "fr"
        },
        {
          "expression": "en",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_inthe",
      "expressions":
      [
        {
          "expression": "in the",
          "keep-order": true,
          "glued": true,
          "locale": "en"
        },
        {
          "expression": "au",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_ago",
      "expressions":
      [
        {
          "expression": "il y a",
          "keep-order": true,
          "glued": true,
          "locale": "fr"
        }
      ]
    },
    {
      "id": "postposition_ago",
      "expressions":
      [
        {
          "expression": "ago",
          "locale": "en"
        }
      ]
    },
    {
      "id": "preposition_for",
      "expressions":
      [
        {
          "expression": "for",
          "locale": "en"
        },
        {
          "expression": "pour",
          "locale": "fr"
        },
        {
          "expression": "Ã ",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "monday",
      "expressions":
      [
        {
          "expression": "monday",
          "locale": "en"
        },
        {
          "expression": "lundi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 1
      }
    },
    {
      "id": "tuesday",
      "expressions":
      [
        {
          "expression": "tuesday",
          "locale": "en"
        },
        {
          "expression": "mardi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 2
      }
    },
    {
      "id": "wednesday",
      "expressions":
      [
        {
          "expression": "wednesday",
          "locale": "en"
        },
        {
          "expression": "mercredi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 3
      }
    },
    {
      "id": "thursday",
      "expressions":
      [
        {
          "expression": "thursday",
          "locale": "en"
        },
        {
          "expression": "jeudi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 4
      }
    },
    {
      "id": "friday",
      "expressions":
      [
        {
          "expression": "friday",
          "locale": "en"
        },
        {
          "expression": "vendredi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 5
      }
    },
    {
      "id": "saturday",
      "expressions":
      [
        {
          "expression": "saturday",
          "locale": "en"
        },
        {
          "expression": "samedi",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 6
      }
    },
    {
      "id": "sunday",
      "expressions":
      [
        {
          "expression": "sunday",
          "locale": "en"
        },
        {
          "expression": "dimanche",
          "locale": "fr"
        }
      ],
      "solution":
      {
        "day": 7
      }
    },
    {
      "id": "weekday",
      "expressions":
      [
        {
          "expression": "@{monday}",
          "aliases":
          [
            {
              "alias": "monday",
              "id": "monday"
            }
          ]
        },
        {
          "expression": "@{tuesday}",
          "aliases":
          [
            {
              "alias": "tuesday",
              "id": "tuesday"
            }
          ]
        },
        {
          "expression": "@{wednesday}",
          "aliases":
          [
            {
              "alias": "wednesday",
              "id": "wednesday"
            }
          ]
        },
        {
          "expression": "@{thursday}",
          "aliases":
          [
            {
              "alias": "thursday",
              "id": "thursday"
            }
          ]
        },
        {
          "expression": "@{friday}",
          "aliases":
          [
            {
              "alias": "friday",
              "id": "friday"
            }
          ]
        },
        {
          "expression": "@{saturday}",
          "aliases":
          [
            {
              "alias": "saturday",
              "id": "saturday"
            }
          ]
        },
        {
          "expression": "@{sunday}",
          "aliases":
          [
            {
              "alias": "sunday",
              "id": "sunday"
            }
          ]
        }
      ]
    },
    {
      "id": "preposition_next",
      "expressions":
      [
        {
          "expression": "next",
          "locale": "en"
        }
      ]
    },
    {
      "id": "postposition_next",
      "expressions":
      [
        {
          "expression": "prochain",
          "locale": "fr"
        },
        {
          "expression": "prochaine",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "preposition_last",
      "expressions":
      [
        {
          "expression": "last",
          "locale": "en"
        }
      ]
    },
    {
      "id": "postposition_last",
      "expressions":
      [
        {
          "expression": "dernier",
          "locale": "fr"
        },
        {
          "expression": "derniere",
          "locale": "fr"
        },
        {
          "expression": "precedent",
          "locale": "fr"
        },
        {
          "expression": "precedente",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "next_day_of_week",
      "expressions":
      [
        {
          "expression": "@{preposition_next} @{weekday}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_next",
              "id": "preposition_next"
            },
            {
              "alias": "weekday",
              "id": "weekday"
            }
          ],
          "solution":
          {
            "date": "`var now = moment(); if(now.isBefore(now.isoWeekday(weekday.day))) { moment().isoWeekday(weekday.day).startOf('day') } else { moment().isoWeekday(weekday.day+7).startOf('day') }`"
          }
        },
        {
          "expression": "@{weekday} @{postposition_next}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "weekday",
              "id": "weekday"
            },
            {
              "alias": "postposition_next",
              "id": "postposition_next"
            }
          ],
          "solution":
          {
            "date": "`var now = moment(); if(now.isBefore(moment().isoWeekday(weekday.day))) { moment().isoWeekday(weekday.day).startOf('day') } else { moment().isoWeekday(weekday.day+7).startOf('day') }`"
          }
        }
      ]
    },
    {
      "id": "last_day_of_week",
      "expressions":
      [
        {
          "expression": "@{preposition_last} @{weekday}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_last",
              "id": "preposition_last"
            },
            {
              "alias": "weekday",
              "id": "weekday"
            }
          ],
          "solution":
          {
            "date": "`var now = moment(); if(now.isBefore(now.isoWeekday(weekday.day))) { moment().isoWeekday(weekday.day-7).startOf('day') } else { moment().isoWeekday(weekday.day).startOf('day') }`"
          }
        },
        {
          "expression": "@{weekday} @{postposition_last}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "weekday",
              "id": "weekday"
            },
            {
              "alias": "postposition_last",
              "id": "postposition_last"
            }
          ],
          "solution":
          {
            "date": "`var now = moment(); if(now.isBefore(now.isoWeekday(weekday.day))) { moment().isoWeekday(weekday.day-7).startOf('day') } else { moment().isoWeekday(weekday.day).startOf('day') }`"
          }
        }
      ]
    },
    {
      "id": "dayofweek_in_number_week",
      "expressions":
      [
        {
          "expression": "@{weekday} @{preposition_in} @{number} @{week}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "weekday",
              "id": "weekday"
            },
            {
              "alias": "preposition_in",
              "id": "preposition_in"
            },
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "week",
              "id": "week"
            }
          ],
          "solution":
          {
            "date": "`moment().isoWeekday(weekday.day+number.number*7).startOf('day')`"
          }
        }
      ]
    },
    {
      "id": "dayofweek_number_week_ago",
      "expressions":
      [
        {
          "expression": "@{weekday} @{number} @{week} @{postposition_ago}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "weekday",
              "id": "weekday"
            },
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "week",
              "id": "week"
            },
            {
              "alias": "postposition_ago",
              "id": "postposition_ago"
            }
          ]
        },
        {
          "expression": "@{weekday} @{number} @{preposition_ago} @{week}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "weekday",
              "id": "weekday"
            },
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "preposition_ago",
              "id": "preposition_ago"
            },
            {
              "alias": "week",
              "id": "week"
            }
          ]
        }
      ],
      "solution":
      {
        "date": "`moment().isoWeekday(weekday.day-number.number*7).startOf('day')`"
      }
    },
    {
      "id": "day",
      "expressions":
      [
        {
          "expression": "day",
          "locale": "en"
        },
        {
          "expression": "jour",
          "locale": "fr"
        },
        {
          "expression": "days",
          "locale": "en"
        },
        {
          "expression": "jours",
          "locale": "fr"
        },
        {
          "expression": "journee",
          "locale": "fr"
        },
        {
          "expression": "journees",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "week",
      "expressions":
      [
        {
          "expression": "week",
          "locale": "en"
        },
        {
          "expression": "semaine",
          "locale": "fr"
        },
        {
          "expression": "weeks",
          "locale": "en"
        },
        {
          "expression": "semaines",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "month",
      "expressions":
      [
        {
          "expression": "month",
          "locale": "en"
        },
        {
          "expression": "months",
          "locale": "en"
        },
        {
          "expression": "mois",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "year",
      "expressions":
      [
        {
          "expression": "year",
          "locale": "en"
        },
        {
          "expression": "annee",
          "locale": "fr"
        },
        {
          "expression": "an",
          "locale": "fr"
        },
        {
          "expression": "years",
          "locale": "en"
        },
        {
          "expression": "annees",
          "locale": "fr"
        },
        {
          "expression": "ans",
          "locale": "fr"
        }
      ]
    },
    {
      "id": "duration",
      "expressions":
      [
        {
          "expression": "@{number} @{day}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "day",
              "id": "day"
            }
          ],
          "solution":
          {
            "duration": "`moment.duration(number.number,'days')`",
            "unit": "day"
          }
        },
        {
          "expression": "@{number} @{week}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "week",
              "id": "week"
            }
          ],
          "solution":
          {
            "duration": "`moment.duration(number.number,'weeks')`",
            "unit": "week"
          }
        },
        {
          "expression": "@{number} @{month}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "month",
              "id": "month"
            }
          ],
          "solution":
          {
            "duration": "`moment.duration(number.number,'months')`",
            "unit": "month"
          }
        },
        {
          "expression": "@{number} @{year}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "number",
              "id": "number",
              "package": "package_number"
            },
            {
              "alias": "year",
              "id": "year"
            }
          ],
          "solution":
          {
            "duration": "`moment.duration(number.number,'years')`",
            "unit": "year"
          }
        }
      ]
    },
    {
      "id": "durations",
      "expressions":
      [
        {
          "expression": "@{durations} @{duration}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "durations",
              "id": "durations"
            },
            {
              "alias": "duration",
              "id": "duration"
            }
          ]
        },
        {
          "expression": "@{durations} @{and} @{duration}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "durations",
              "id": "durations"
            },
            {
              "alias": "and",
              "id": "and"
            },
            {
              "alias": "duration",
              "id": "duration"
            }
          ]
        },
        {
          "expression": "@{durations} @{coma} @{duration}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "durations",
              "id": "durations"
            },
            {
              "alias": "coma",
              "id": "coma",
              "package": "package_date"
            },
            {
              "alias": "duration",
              "id": "duration"
            }
          ]
        },
        {
          "expression": "@{duration}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "duration",
              "id": "duration"
            }
          ],
          "solution":
          {
            "duration": "`duration.duration`",
            "unit": "`duration.unit`"
          }
        }
      ],
      "solution":
      {
        "duration": "`moment.duration(durations.duration).add(moment.duration(duration.duration))`",
        "unit": "`var a=durations.unit; var b=duration.unit;if(a=='year'){b}else if(a=='day'){a}else if(a=='month'){if(b=='year'){a}else{b}}else{if(b=='day'){b}else{a}}`"
      }
    },
    {
      "id": "period",
      "expressions":
      [
        {
          "expression": "@{preposition_for} @{duration}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_for",
              "id": "preposition_for"
            },
            {
              "alias": "duration",
              "id": "durations"
            }
          ],
          "solution":
          {
            "date_range": "`duration.duration`"
          }
        }
      ]
    },
    {
      "id": "latency",
      "expressions":
      [
        {
          "expression": "@{preposition_in} @{latency}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_in",
              "id": "preposition_in"
            },
            {
              "alias": "latency",
              "id": "durations"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range(moment().add(moment.duration(latency.duration)).startOf(latency.unit),moment().add(moment.duration(latency.duration)).endOf(latency.unit))`"
          }
        }
      ]
    },
    {
      "id": "special_date",
      "expressions":
      [
        {
          "expression": "@{preposition_for} @{special_date}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_for",
              "id": "preposition_for"
            },
            {
              "alias": "special_date",
              "id": "special_date",
              "package": "package_special_date"
            }
          ],
          "solution":
          {
            "date": "`special_date.date`"
          }
        }
      ]
    },
    {
      "id": "week_of_date",
      "expressions":
      [
        {
          "expression": "@{preposition_the} @{week} @{preposition_of} @{special_date}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_the",
              "id": "preposition_the"
            },
            {
              "alias": "week",
              "id": "week"
            },
            {
              "alias": "preposition_of",
              "id": "preposition_of"
            },
            {
              "alias": "special_date",
              "id": "special_date",
              "package": "package_special_date"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range( moment(special_date.date).startOf('week'), moment(special_date.date).endOf('week') )`"
          }
        },
        {
          "expression": "@{preposition_the} @{week} @{preposition_of} @{date_day_month_year}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_the",
              "id": "preposition_the"
            },
            {
              "alias": "week",
              "id": "week"
            },
            {
              "alias": "preposition_of",
              "id": "preposition_of"
            },
            {
              "alias": "date_day_month_year",
              "id": "date_day_month_year",
              "package": "package_date"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range( moment(date_day_month_year.date).startOf('week'), moment(date_day_month_year.date).endOf('week') )`"
          }
        },
        {
          "expression": "@{preposition_the} @{week} @{preposition_of} @{date_day_month}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_the",
              "id": "preposition_the"
            },
            {
              "alias": "week",
              "id": "week"
            },
            {
              "alias": "preposition_of",
              "id": "preposition_of"
            },
            {
              "alias": "date_day_month",
              "id": "date_day_month",
              "package": "package_date"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range( moment(date_day_month.date).startOf('week'), moment(date_day_month.date).endOf('week') )`"
          }
        },
        {
          "expression": "@{preposition_the} @{week} @{preposition_of} @{date_month_the_day}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_the",
              "id": "preposition_the"
            },
            {
              "alias": "week",
              "id": "week"
            },
            {
              "alias": "preposition_of",
              "id": "preposition_of"
            },
            {
              "alias": "date_month_the_day",
              "id": "date_month_the_day",
              "package": "package_date"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range( moment(date_month_the_day.date).startOf('week'), moment(date_month_the_day.date).endOf('week') )`"
          }
        }
      ]
    },
    {
      "id": "duration_with_latency",
      "expressions":
      [
        {
          "expression": "@{preposition_for} @{duration} @{preposition_in} @{latency}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_for",
              "id": "preposition_for"
            },
            {
              "alias": "duration",
              "id": "durations"
            },
            {
              "alias": "preposition_in",
              "id": "preposition_in"
            },
            {
              "alias": "latency",
              "id": "durations"
            }
          ],
          "solution":
          {
            "date_range": "`moment.range( moment().add(moment.duration(latency.duration)) , moment().add(moment.duration(latency.duration)).add(moment.duration(duration.duration)) )`"
          }
        }
      ]
    },
    {
      "id": "in_month",
      "expressions":
      [
        {
          "expression": "@{preposition_in} @{month}",
          "keep-order": true,
          "glued": true,
          "aliases":
          [
            {
              "alias": "preposition_in",
              "id": "preposition_in"
            },
            {
              "alias": "month",
              "id": "date_month_number"
            }
          ]
        }
      ],
      "solution":
      {
        "date_range": "`moment.range( moment().month(month.month_number-1).startOf('month'),moment().month(month.month_number-1).endOf('month'))`"
      }
    }
  ]
}
