<div class="interpretations-list__draggable"></div>

<%= form_with(model: [interpretation.intent.agent.owner, interpretation.intent.agent, interpretation.intent, interpretation], class: 'interpretations-list__edit') do |f| %>
  <div class="field">
    <div class="control">
      <%= f.hidden_field :expression, id: "expression-#{interpretation.id}" %>
      <trix-editor
        input="<%= "expression-#{interpretation.id}" %>"
        placeholder="<%= t('views.interpretations.new.placeholder') %>"></trix-editor>
      <%= display_errors(interpretation, :expression) %>
    </div>
  </div>

  <div class="aliases" style="display:none;"></div>

  <div class="field">
    <div class="field field--inline">
      <div class="control">
        <%= f.check_box :keep_order, id: "keep_order__#{interpretation.id}" %>
        <%= f.label :keep_order, for: "keep_order__#{interpretation.id}" %>
      </div>
      <div class="control">
        <%= f.check_box :glued, id: "glued__#{interpretation.id}" %>
        <%= f.label :glued, for: "glued__#{interpretation.id}" %>
      </div>
    </div>
    <div class="control">
      <%= f.label :solution, for: "solution__#{interpretation.id}" %>
      <%= f.text_area :solution, id: "solution__#{interpretation.id}", rows: '3', maxlength: '2000', spellcheck: 'false' %>
    </div>
    <%= display_errors(interpretation, :keep_order) %>
    <%= display_errors(interpretation, :glued) %>
    <%= display_errors(interpretation, :solution) %>
  </div>

  <div class="field">
    <%= f.button t('views.interpretations.index.update_btn').html_safe, class: 'btn btn--primary',
          data: { disable_with: "<span class='icon icon--small icon--spin'>#{icon_loading}</span>" } %>

    <%= link_to t('views.interpretations.index.cancel_btn'),
          user_agent_intent_interpretation_path(
            interpretation.intent.agent.owner,
            interpretation.intent.agent,
            interpretation.intent,
            interpretation
          ),
          remote: true,
          class: 'btn btn--plain',
          data: { disable_with: "<span class='icon icon--small icon--spin'>#{icon_loading}</span>" } %>

    <%= link_to "Remove".html_safe,
        user_agent_intent_interpretation_path(
          interpretation.intent.agent.owner,
          interpretation.intent.agent,
          interpretation.intent,
          interpretation
        ),
        method: :delete,
        remote: true,
        class: 'btn btn--plain',
        title: t('views.interpretations.index.delete_btn'),
        data: { disable_with: "<span class='icon icon--small icon--spin'>#{icon_loading}</span>" } %>
  </div>
<% end %>
