<%= form_with model: [current_user, agent], data: { type: 'json' } do |f| %>
  <div class="field">
    <div class="control">
      <%= f.label :name, t('views.agents.new.name') %>
      &nbsp;<span class="badge badge--small badge--outline"><%= t('required') %></span>
      <br />
      <%= f.text_field :name, id: :agent_name %>
      <%= display_errors(agent, :name) %>
    </div>
  </div>

  <div class="field">
    <div class="control">
      <%= f.label :agentname, t('views.agents.new.agentname') %>
      &nbsp;<span class="badge badge--small badge--outline"><%= t('required') %></span>
      <br />
      <%= f.text_field :agentname, id: :agent_agentname %>
      <%= display_errors(agent, :agentname) %>
    </div>
  </div>

  <div class="actions">
    <% if ["edit", "update"].include? action_name %>
      <% btn_label = t('views.agents.edit.btn') %>
    <% else %>
      <% btn_label = t('views.agents.new.btn') %>
    <% end %>
    <%= f.button btn_label, class: "btn btn--primary",
      data: {
        disable_with: "<span class='icon icon--spin'>#{icon_loading}</span> #{t('loading')}".html_safe
      }
    %>
    <a href="<%= agents_path %>" class="btn btn--plain"><%= t('cancel') %></a>
  </div>
<% end %>
