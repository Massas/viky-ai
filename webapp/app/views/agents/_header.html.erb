<% if agent.image.nil? %>
  <% css_class = "background-color-gradient__#{agent.color}" %>
<% else %>
  <% css_class = "agent-header__visual--image" %>
  <% css_style = "background-image: url(#{agent.image_url(:background)});" %>
<% end %>

<div class="agent-header">

  <div class="agent-header__visual <%= css_class %>" style="<%= css_style %>">
    <% if agent.is_public? %>
      <span class="agent__visual__ribbon">
        <%= t('activerecord.attributes.agent.visibility_is_public') %>
      </span>
    <% end %>
  </div>

  <div class="agent-header__content">
    <%= render 'agents/header_content', agent: agent %>
  </div>

  <div class="agent-header__content__nav">
    <ul>
      <li>
        <% css_class = controller_name == 'agents' ? 'current' : '' %>
        <%= link_to t('views.agents.show.sections.overview'), user_agent_path(agent.owner, agent), class: css_class %>
      </li>
      <li>
        <% css_class   = controller_name == 'intents' ? 'current' : '' %>
        <% badge_class = controller_name == 'intents' ? 'badge--primary' : '' %>
        <% text  = t('views.agents.show.sections.intents')%>
        <% text += " <span class='badge badge--small #{badge_class}'>#{agent.intents.count}</span>" %>
        <%= link_to text.html_safe, user_agent_intents_path(agent.owner, agent), class: css_class %>
      </li>
      <li>
        <% css_class   = controller_name == 'entities_lists' ? 'current' : '' %>
        <% badge_class = controller_name == 'entities_lists' ? 'badge--primary' : '' %>
        <% text  = t('views.agents.show.sections.entities_lists')%>
        <% text += " <span class='badge badge--small #{badge_class}'>#{agent.entities_lists.count}</span>" %>
        <%= link_to text.html_safe, user_agent_entities_lists_path(agent.owner, agent), class: css_class %>
      </li>
    </ul>
  </div>

</div>
